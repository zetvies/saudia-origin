<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Flight - Saudia Travel Fair</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'saudia-green': '#006400',
                        'saudia-light-green': '#228B22',
                        'saudia-blue': '#87CEEB',
                        'saudia-light-blue': '#98FB98'
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen bg-gradient-to-br from-saudia-blue to-saudia-light-blue flex items-center justify-center text-saudia-green relative overflow-hidden p-5">
    <!-- Geometric patterns -->
    <div class="absolute top-0 left-0 w-48 h-48 bg-gradient-to-br from-saudia-green via-saudia-light-green to-green-500 opacity-10 z-10" style="clip-path: polygon(0 0, 100% 0, 50% 100%);"></div>
    <div class="absolute bottom-0 right-0 w-36 h-36 bg-gradient-to-br from-saudia-green via-saudia-light-green to-green-500 opacity-10 z-10" style="clip-path: polygon(50% 0, 100% 50%, 50% 100%, 0 50%);"></div>
    
    <div class="bg-white/90 backdrop-blur-md rounded-3xl p-12 shadow-2xl border-2 border-saudia-green/20 max-w-lg w-full relative z-20">
        <div class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-saudia-green to-saudia-light-green bg-clip-text text-transparent">✈️ Masukkan Informasi Anda</h1>
        </div>

        <form id="contactForm">
            <div class="mb-6">
                <label for="nama" class="block text-sm font-semibold mb-2 text-saudia-green">Nama</label>
                <input type="text" id="nama" name="nama" placeholder="Masukkan nama lengkap" required 
                       class="w-full px-4 py-3 border-2 border-saudia-green/30 rounded-xl bg-white/90 text-saudia-green placeholder-saudia-green/60 focus:outline-none focus:border-saudia-green/60 focus:bg-white focus:shadow-lg focus:shadow-saudia-green/20 transition-all duration-300">
            </div>

            <div class="mb-6">
                <label for="email" class="block text-sm font-semibold mb-2 text-saudia-green">Email</label>
                <input type="email" id="email" name="email" placeholder="Masukkan alamat email" required 
                       class="w-full px-4 py-3 border-2 border-saudia-green/30 rounded-xl bg-white/90 text-saudia-green placeholder-saudia-green/60 focus:outline-none focus:border-saudia-green/60 focus:bg-white focus:shadow-lg focus:shadow-saudia-green/20 transition-all duration-300">
            </div>

            <div class="mb-6">
                <label for="whatsapp" class="block text-sm font-semibold mb-2 text-saudia-green">No. WhatsApp</label>
                <input type="tel" id="whatsapp" name="whatsapp" placeholder="Masukkan nomor WhatsApp" required 
                       class="w-full px-4 py-3 border-2 border-saudia-green/30 rounded-xl bg-white/90 text-saudia-green placeholder-saudia-green/60 focus:outline-none focus:border-saudia-green/60 focus:bg-white focus:shadow-lg focus:shadow-saudia-green/20 transition-all duration-300">
            </div>

            <button type="submit" class="w-full bg-gradient-to-r from-saudia-green to-saudia-light-green text-white py-4 px-6 rounded-xl text-lg font-bold cursor-pointer transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:shadow-saudia-green/30 border-2 border-saudia-green/30 active:translate-y-0">Submit</button>
        </form>

        <div class="bg-green-500/20 border border-green-500/50 rounded-xl p-4 mt-6 text-center hidden" id="successMessage">
            ✅ Form submitted successfully! Redirecting to game...
        </div>

        <div class="text-center mt-8">
            <a href="/" class="text-saudia-green/80 text-sm hover:text-saudia-green hover:underline transition-colors duration-300">← Back to Home</a>
        </div>
    </div>

    <script>
        // WebSocket connection
        const ws = new WebSocket(`ws://${window.location.host}`);
        
        ws.onopen = function() {
            console.log('WebSocket connected');
        };
        
        ws.onmessage = function(event) {
            const message = JSON.parse(event.data);
            if (message.type === 'form-submitted') {
                console.log('Form submitted via WebSocket:', message.data);
            }
        };
        
        ws.onerror = function(error) {
            console.error('WebSocket error:', error);
        };
        
        ws.onclose = function() {
            console.log('WebSocket disconnected');
        };
        
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            // Submit form via AJAX
            fetch('/submit-form', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
                         .then(result => {
                 if (result.success) {
                     // Hide the form
                     const form = document.getElementById('contactForm');
                     form.classList.add('hidden');
                     
                     // Show success message
                     const successMessage = document.getElementById('successMessage');
                     successMessage.classList.remove('hidden');
                     
                     // Form submitted successfully - no redirect needed
                 }
             })
            .catch(error => {
                console.error('Error submitting form:', error);
                alert('Error submitting form. Please try again.');
            });
        });
    </script>
</body>
</html>
